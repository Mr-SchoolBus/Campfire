<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Board Game Gallery</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #222 url('Campfire.png') no-repeat center center fixed;
            background-size: cover;
            color: #fff;
        }
        .container { max-width: 1200px; margin: auto; padding: 20px; }
        .game-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);   /* 4 columns */
            grid-template-rows: repeat(2, 1fr);      /* 2 rows */
            gap: 20px;
            overflow-x: auto;
            scroll-snap-type: x mandatory;
            padding-bottom: 10px;
        }
        .game-card {
            background: #333;
            border-radius: 8px;
            padding: 16px;
            cursor: pointer;
            transition: box-shadow 0.2s;
            scroll-snap-align: start;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 340px;
            min-width: 0;
            font-size: 1.15rem;
        }
        .game-card:hover { box-shadow: 0 0 10px #444; }
        .game-card img {
            width: 100%;
            height: 240px;
            object-fit: contain;   /* Changed from cover to contain */
            background: #222;      /* Optional: adds a background for letterboxing */
            border-radius: 4px;
            margin-bottom: 12px;
        }
        .filters { margin-bottom: 20px; }
        .filters label { color: yellow; margin-right: 10px; }
        #detailsPage { display: none; }
        #backButton { margin-bottom: 20px; }
        /* Optional: Hide scrollbar for a cleaner look */
        .game-grid::-webkit-scrollbar {
            display: none;
        }
    </style>
</head>
<body>
<div class="container">

    <!-- Landing Page -->
    <div id="landingPage">
        <div class="filters" style="display: flex; align-items: center; flex-wrap: wrap; gap: 16px; margin-bottom: 20px;">
            <label for="numPlayers">Players:</label>
            <select id="numPlayers"></select>
            <label for="playTime">Play Time:</label>
            <select id="playTime"></select>
            <label for="weightRange">Weight:</label>
            <select id="weightRange"></select>
            <div class="alphabet-filter" style="display: flex; align-items: center; flex-wrap: wrap; gap: 2px; margin-left: 24px;">
                <span class="alpha-letter" data-letter="All" style="cursor:pointer; color:yellow; font-weight:bold; margin:0 4px;">All</span>
                <span class="alpha-letter" data-letter="A" style="cursor:pointer; margin:0 4px;">A</span>
                <span class="alpha-letter" data-letter="B" style="cursor:pointer; margin:0 4px;">B</span>
                <span class="alpha-letter" data-letter="C" style="cursor:pointer; margin:0 4px;">C</span>
                <span class="alpha-letter" data-letter="D" style="cursor:pointer; margin:0 4px;">D</span>
                <span class="alpha-letter" data-letter="E" style="cursor:pointer; margin:0 4px;">E</span>
                <span class="alpha-letter" data-letter="F" style="cursor:pointer; margin:0 4px;">F</span>
                <span class="alpha-letter" data-letter="G" style="cursor:pointer; margin:0 4px;">G</span>
                <span class="alpha-letter" data-letter="H" style="cursor:pointer; margin:0 4px;">H</span>
                <span class="alpha-letter" data-letter="I" style="cursor:pointer; margin:0 4px;">I</span>
                <span class="alpha-letter" data-letter="J" style="cursor:pointer; margin:0 4px;">J</span>
                <span class="alpha-letter" data-letter="K" style="cursor:pointer; margin:0 4px;">K</span>
                <span class="alpha-letter" data-letter="L" style="cursor:pointer; margin:0 4px;">L</span>
                <span class="alpha-letter" data-letter="M" style="cursor:pointer; margin:0 4px;">M</span>
                <span class="alpha-letter" data-letter="N" style="cursor:pointer; margin:0 4px;">N</span>
                <span class="alpha-letter" data-letter="O" style="cursor:pointer; margin:0 4px;">O</span>
                <span class="alpha-letter" data-letter="P" style="cursor:pointer; margin:0 4px;">P</span>
                <span class="alpha-letter" data-letter="Q" style="cursor:pointer; margin:0 4px;">Q</span>
                <span class="alpha-letter" data-letter="R" style="cursor:pointer; margin:0 4px;">R</span>
                <span class="alpha-letter" data-letter="S" style="cursor:pointer; margin:0 4px;">S</span>
                <span class="alpha-letter" data-letter="T" style="cursor:pointer; margin:0 4px;">T</span>
                <span class="alpha-letter" data-letter="U" style="cursor:pointer; margin:0 4px;">U</span>
                <span class="alpha-letter" data-letter="V" style="cursor:pointer; margin:0 4px;">V</span>
                <span class="alpha-letter" data-letter="W" style="cursor:pointer; margin:0 4px;">W</span>
                <span class="alpha-letter" data-letter="X" style="cursor:pointer; margin:0 4px;">X</span>
                <span class="alpha-letter" data-letter="Y" style="cursor:pointer; margin:0 4px;">Y</span>
                <span class="alpha-letter" data-letter="Z" style="cursor:pointer; margin:0 4px;">Z</span>
            </div>
        </div>
        <div style="display: flex; align-items: center;">
            <!-- Replace the arrow buttons with chevrons or other symbols -->
            <button id="prevBtn" style="height: 220px; font-size: 4rem; background: none; border: none; color: yellow; cursor: pointer;">&#x25C0;</button>
            <div class="game-grid" id="gameGrid" style="flex: 1;"></div>
            <button id="nextBtn" style="height: 220px; font-size: 4rem; background: none; border: none; color: yellow; cursor: pointer;">&#x25B6;</button>
        </div>
    </div>

    <!-- Details Page -->
    <div id="detailsPage">
        <button id="backButton">‚Üê Back</button>
        <div id="gameDetails"></div>
        <button id="scheduleButton">Schedule</button>
        <!-- Schedule modal can be reused here -->
    </div>

</div>
<script>
    // --- Sample Data and Setup ---
    const gamesPerPage = 8;
    let currentPage = 0;
    let filteredGames = [];
    let allGames = [];

    // List of BoardGameGeek game IDs to fetch (30 random/popular games), now in alphabetical order by game name
    const gameIds = [
        174430,  // Azul
        822,     // Carcassonne
        13,      // Catan
        140620,  // Codenames
        30549,   // Agricola
        198928,  // Ark Nova
        68448,   // 7 Wonders
        102794,  // Dixit
        220308,  // Gloomhaven
        31260,   // Power Grid
        84876,   // Robinson Crusoe: Adventures on the Cursed Island
        295947,  // Return to Dark Tower
        128882,  // Russian Railroads
        169786,  // Scythe
        187645,  // Terraforming Mars
        178900,  // Spirit Island
        161936,  // Splendor
        9209,    // Pandemic
        12333,   // Ticket to Ride
   
  
    ];

    // Populate filter dropdowns
    document.getElementById('numPlayers').innerHTML = `
        <option value="">Any</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4+</option>
    `;

    document.getElementById('playTime').innerHTML = `
        <option value="">Any</option>
        <option value="30">30 min</option>
        <option value="60">1 hr</option>
        <option value="90">1.5 hr</option>
        <option value="120">2 hr</option>
        <option value="121">2 hr +</option>
    `;

    document.getElementById('weightRange').innerHTML = `<option value="">Any</option>
        <option value="1">1 (Light)</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4 (Heavy)</option>`;

    // --- Fetch and Render Games ---
    async function fetchGames() {
        // Fetch all games in one API call (comma-separated IDs)
        const ids = gameIds.join(',');
        const response = await fetch(`https://boardgamegeek.com/xmlapi2/thing?id=${ids}&stats=1`);
        const xmlText = await response.text();
        const parser = new DOMParser();
        const xml = parser.parseFromString(xmlText, "application/xml");

        allGames = Array.from(xml.querySelectorAll('item')).map(item => ({
            id: parseInt(item.getAttribute('id')),
            name: item.querySelector('name').getAttribute('value'),
            image: item.querySelector('image') ? item.querySelector('image').textContent : '',
            minPlayers: item.querySelector('minplayers') ? item.querySelector('minplayers').getAttribute('value') : '',
            maxPlayers: item.querySelector('maxplayers') ? item.querySelector('maxplayers').getAttribute('value') : '',
            playTime: item.querySelector('playingtime') ? item.querySelector('playingtime').getAttribute('value') : '',
            // Get weight (complexity) from statistics/ratings/averageweight
            weight: item.querySelector('statistics ratings averageweight') ? 
                parseFloat(item.querySelector('statistics ratings averageweight').getAttribute('value')) : '',
            description: item.querySelector('description') ? item.querySelector('description').textContent : ''
        }));

        // Sort games alphabetically by name
        allGames.sort((a, b) => a.name.localeCompare(b.name));

        filteredGames = allGames;
        renderGames();
    }

    // Touch/Swipe support for horizontal navigation
    let startX = 0;
    let scrollLeft = 0;
    const grid = document.getElementById('gameGrid');
    grid.addEventListener('touchstart', (e) => {
        startX = e.touches[0].pageX - grid.offsetLeft;
        scrollLeft = grid.scrollLeft;
    });
    grid.addEventListener('touchmove', (e) => {
        const x = e.touches[0].pageX - grid.offsetLeft;
        const walk = (startX - x);
        grid.scrollLeft = scrollLeft + walk;
    });

    function renderGames() {
        const grid = document.getElementById('gameGrid');
        grid.innerHTML = '';
        const start = currentPage * gamesPerPage;
        const end = start + gamesPerPage;
        const gamesToShow = filteredGames.slice(start, end);
        gamesToShow.forEach(game => {
            const card = document.createElement('div');
            card.className = 'game-card';
            card.innerHTML = `<img src="${game.image}" alt="${game.name}">
                              <h4>${game.name}</h4>`;
            card.onclick = () => showDetails(game.id);
            grid.appendChild(card);
        });
        // Hide/show arrows as needed
        document.getElementById('prevBtn').style.visibility = currentPage === 0 ? 'hidden' : 'visible';
        document.getElementById('nextBtn').style.visibility = end >= filteredGames.length ? 'hidden' : 'visible';
    }

    // Arrow navigation
    document.getElementById('prevBtn').onclick = () => {
        if (currentPage > 0) {
            currentPage--;
            renderGames();
        }
    };
    document.getElementById('nextBtn').onclick = () => {
        if ((currentPage + 1) * gamesPerPage < filteredGames.length) {
            currentPage++;
            renderGames();
        }
    };

    let currentAlpha = "All";

    // Alphabet filter logic
    document.querySelectorAll('.alpha-letter').forEach(span => {
        span.onclick = function() {
            document.querySelectorAll('.alpha-letter').forEach(s => s.style.color = "");
            this.style.color = "yellow";
            currentAlpha = this.getAttribute('data-letter');
            applyFilters();
        };
    });

    // Update filter logic to include alphabet filter
    function applyFilters() {
        const numPlayers = document.getElementById('numPlayers').value;
        const playTime = document.getElementById('playTime').value;
        const weightRange = document.getElementById('weightRange').value;

        filteredGames = allGames.filter(game => {
            let match = true;
            // Players filter
            if (numPlayers) {
                if (numPlayers === "4") {
                    if (parseInt(game.maxPlayers) < 4) match = false;
                } else {
                    if (parseInt(game.minPlayers) > parseInt(numPlayers) || parseInt(game.maxPlayers) < parseInt(numPlayers)) match = false;
                }
            }
            // Play time filter
            if (playTime) {
                if (playTime === "121") {
                    if (parseInt(game.playTime) < 121) match = false;
                } else {
                    if (parseInt(game.playTime) > parseInt(playTime)) match = false;
                }
            }
            // Weight filter
            if (weightRange && game.weight && Math.floor(game.weight) != parseInt(weightRange)) match = false;
            // Alphabet filter
            if (currentAlpha !== "All" && (!game.name || game.name[0].toUpperCase() !== currentAlpha)) match = false;
            return match;
        });
        currentPage = 0;
        renderGames();
    }

    // Update filter dropdowns to use applyFilters
    document.querySelectorAll('.filters select').forEach(sel => {
        sel.onchange = applyFilters;
    });

    // --- Details Page ---
    function showDetails(gameId) {
        const game = allGames.find(g => g.id === gameId);
        if (!game) return;
        document.getElementById('landingPage').style.display = 'none';
        document.getElementById('detailsPage').style.display = 'block';
        document.getElementById('gameDetails').innerHTML = `
            <h2>${game.name}</h2>
            <img src="${game.image}" alt="${game.name}" style="max-width:300px;">
            <p><strong>Players:</strong> ${game.minPlayers} - ${game.maxPlayers}</p>
            <p><strong>Play Time:</strong> ${game.playTime} min</p>
            <p><strong>Weight:</strong> ${game.weight}</p>
            <div style="background:rgba(34,34,34,0.98);color:#fff;padding:16px;border-radius:8px;margin-top:12px;box-shadow:0 2px 8px rgba(0,0,0,0.4);">
                ${game.description}
            </div>
        `;
    }
    document.getElementById('backButton').onclick = () => {
        document.getElementById('detailsPage').style.display = 'none';
        document.getElementById('landingPage').style.display = 'block';
    };

    // --- Initialize ---
    fetchGames();
</script>
</body>
</html>

